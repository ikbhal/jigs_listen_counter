<!DOCTYPE html>
<html>
<body>
<h1>Listen Time counting and ring bell</h1>

<p>Listen Time in seconds</p>
<input type="number" id="listenTime" name="listenTime" value=""></input><br>
<input type="nubmer" id="times" name="times" value="13"/>

<input type="checkbox" id="playsound" name="playsound" value="1">
<label for="vehicle1">Play Sound on each iteration</label><br>

<button onClick="startTracking()">Start Tracking</button>
<button onClick="clearTracking()">Clear Tracking</button>
<hr/>
<div >
    
    Listen count: <span id="listenCount">0</span>
    <p id="message"></p>
</div>
<script>
var listenCount = 0;
var intervalObj = null;
var intervalTime = 0;

function play() {
    //D:\git_tauqeer\jigs\counter\Alarm Bell.mp3

    var canPlaySound = document.getElementById('playsound').checked;
    if(canPlaySound){
        console.log("playing sound");
        var audio = new Audio('./AlarmBell.mp3');
        audio.play();
    }else{
        console.log("not playing sound");
    }
}

function oneListenTimeHanlder(){
    console.log("oneListen time handler");
    listenCount ++;

    console.log("changeing listencount to listenCount", listenCount);
    document.getElementById("listenCount").innerText = listenCount;
    //play sound
    play();

     //set mesage
     document.getElementById("message").innerHTML += listenCount + " oneListenTimeHanlder <br/>";

}

function startTracking(){
    // intervalTime in millisconds
    console.log("start tracking");
    intervalTime = parseFloat(document.getElementById("listenTime").value)* 1000;
    console.log("intervalTimeInMillisecones ", intervalTime);
    intervalObj = setInterval(oneListenTimeHanlder, intervalTime);

    //set mesage
    document.getElementById("message").innerHTML += "started tracking<br/>";
}

function clearTracking(){
    console.log("inside clearTracking")
    clearInterval(intervalObj);

     //set mesage
     document.getElementById("message").innerHTML += "clear tracking<br/>";
}
</script>

</body>
</html>
